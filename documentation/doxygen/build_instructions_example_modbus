# This file was automatically generated on Wed 04 Nov 2015 10:55:05 GMT from
# source: /dls_sw/prod/R3.14.12.3/support/eurotherm2k/1-22/etc/makeIocs/example_modbus.xml
# 
# *** Please do not edit this file: edit the source file instead. ***
# 
/**
\page build_instructions_example_modbus Build Instructions for example_modbus
Build Instructions for example_modbus
<ol>
<li> Add the dependencies to configure/RELEASE.
\verbatim
MODBUS=/dls_sw/prod/R3.14.12.3/support/modbus/2-6dls1
ASYN=/dls_sw/prod/R3.14.12.3/support/asyn/4-26
EUROTHERM2K=/dls_sw/prod/R3.14.12.3/support/eurotherm2k/1-22
\endverbatim

<li> Add the DBD dependencies to src/Makefile
\verbatim
example_modbus_DBD += base.dbd
example_modbus_DBD += asyn.dbd
example_modbus_DBD += drvAsynIPPort.dbd
example_modbus_DBD += modbusSupport.dbd
example_modbus_DBD += eurothermModbusSupport.dbd
\endverbatim

<li> Add the LIBS dependencies to src/Makefile
\verbatim
example_modbus_LIBS += eurothermModbus
example_modbus_LIBS += modbus
example_modbus_LIBS += asyn
\endverbatim

<li> Use the template files to add records to the database.
\verbatim

# Macros:
#  P         Device prefix
#  Q         Device suffix
#  PORT      Asyn Port
#  ADDR      Modbus address
#  DISABLED  Start disabled?
file $(EUROTHERM2K)/db/eurothermModbus.template
{
pattern { P, Q, PORT, ADDR, DISABLED }
    { "BL11I-EA-TEMPC-01", "", "EMODBUS", "1", "0" }
}

# Macros:
#  P         Device prefix
#  Q         Device suffix
#  PORT      Asyn Port
#  ADDR      Modbus address
#  PREC      Setpoint precision, must match controller setup
#  LOOP      Loop number, default 1
#  SPMIN     Minimum setpoint
#  SPMAX     Maximum setpoint
#  RRMAX     Maximum ramp rate
#  EGUT      Engineering units for SP & RBV, etc, default is C
#  EGU       Engineering units for ramp rate, default is C/s
#  gda_name  Name to export to gda as
#  gda_desc  Description for gda
#  name      Object and gui association name
file $(EUROTHERM2K)/db/eurothermModbusLoop.template
{
pattern { P, Q, PORT, ADDR, PREC, LOOP, SPMIN, SPMAX, RRMAX, EGUT, EGU, gda_name, gda_desc, name }
    { "BL11I-EA-TEMPC-01", "", "EMODBUS", "1", "4", "1", "-273", "1000", "1", "C", "C/s", "", "", "EMODBUS.LOOP1" }
}
\endverbatim

<li> Add the startup commands to st.cmd
\verbatim

# Loading libraries
# -----------------

# Device initialisation
# ---------------------

cd "$(TOP)"

dbLoadDatabase "dbd/example_modbus.dbd"
example_modbus_registerRecordDeviceDriver(pdbbase)

drvAsynIPPortConfigure("EMODBUS", "10.111.8.1:502", 100, 0, 1)

modbusInterposeConfig(EMODBUS, 0, 2000)
eurothermModbusCtrlConfigure(EMODBUS, 1)

eurothermModbusLoopConfigure(EMODBUS, 1, 1)
\endverbatim
</ol>
**/
